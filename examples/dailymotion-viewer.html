<html>
  <head>
    <script src="//api.dmcdn.net/all.js"></script>
    <style>
      .container {
        position: relative;
        display: inline-block;
      }
    </style>
  </head>
  <body>
    <div class="container">
        <div id="player"></div>
    </div>
    <script type="text/javascript">
      function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(window.parent.location.search);
        if(results == null)
          return null;
        else
          return decodeURIComponent(results[1].replace(/\+/g, " "));
      }

      var HapyakViewerConfig = {
        apiKey: "",
        assets: 'http://hapyak-assets.s3.amazonaws.com/js',
        api: 'http://hapyak.com',
        logLevel: 'info',
        debug: false
      },
      mode = getParameterByName('mode') || 'staging',
      scr = '/hapyak.gz.js';

      if (mode === 'dev') {
        HapyakViewerConfig.assets = '/js';
        HapyakViewerConfig.api = 'http://dev.hapyak.com';
        HapyakViewerConfig.logLevel = 'debug';
        HapyakViewerConfig.debug = true;
        scr = '/hapyak.js';
      } else if (mode === 'staging') {
        HapyakViewerConfig.assets = 'http://hapyak-staging-assets.s3.amazonaws.com/js';
        HapyakViewerConfig.api = 'http://staging.hapyak.com';
      } else if (mode === 'feature') {
        HapyakViewerConfig.assets = 'http://hapyak-feature-assets.s3.amazonaws.com/js';
        HapyakViewerConfig.api = 'http://feature.hapyak.com';
      }

      document.write('<' + 'script src="' + HapyakViewerConfig.assets + scr + '" type="text/javascript"><' + '/script>');
    </script>
    <script>
      (function() {
        var player = DM.player("player", {
                "video": "xhl0be",
                "width": 560,
                "height": 315,
                "params": {
                    "info": 0,
                    "related": 0
                }
            });

          hapyak.viewer({
            assets: HapyakViewerConfig.assets,
            api: HapyakViewerConfig.api,
            logLevel: HapyakViewerConfig.logLevel,
            debug: HapyakViewerConfig.debug,
            apiKey: HapyakViewerConfig.apiKey,
            player: player,
            videoType: "dailymotion",
            trackId: 648,
            autoplay: false
          });
      })();
    </script>
  </body>
</html>
